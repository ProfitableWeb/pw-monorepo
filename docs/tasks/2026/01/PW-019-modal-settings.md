# PW-019: Модальное окно настроек пользователя

## Описание

Реализовать модальное окно настроек пользователя с навигацией по секциям, которое открывается при клике на пункт
"Настройки" в меню пользователя в правом верхнем углу AppBar.

## Требования

### Структура модального окна

Двухколоночный лейаут:

**Левая колонка (навигация):**

- Список из 3-х пунктов с иконками
- Настройка профиля (иконка LuUser)
- Настройка уведомлений (иконка LuBell)
- E-mail подписка (иконка LuMail)

**Правая колонка (контент):**

- Динамическое содержимое выбранной секции
- Активная подсветка текущей вкладки

### Секции настроек

**Настройка профиля:**

- Аватар с возможностью изменения
- Поле ввода имени
- Поле ввода email

**Настройка уведомлений:**

- Email уведомления (toggle)
- Браузерные уведомления (toggle)
- Еженедельный дайджест (toggle)
- Новые статьи (toggle)
- Ответы на комментарии (toggle)

**E-mail подписка:**

- Статус подписки (toggle: подписан/не подписан)
- Поле email для подписки
- Выбор частоты: ежедневно/еженедельно/ежемесячно (radio buttons)

## Реализация

### Созданные файлы

1. **packages/types/user.ts**
   - Типы для настроек пользователя: `UserSettings`, `UserProfileSettings`, `NotificationSettings`,
     `EmailSubscriptionSettings`, `SettingsTab`
   - Константа `DEFAULT_USER_SETTINGS`

2. **apps/web/src/components/common/settings-modal/SettingsModal.tsx**
   - Основной компонент модального окна
   - Три секции: Profile, Notifications, Email
   - Состояние для активной вкладки
   - Сохранение/отмена изменений
   - Автономное сохранение в localStorage

3. **apps/web/src/components/common/settings-modal/SettingsModal.scss**
   - Стили для модального окна
   - Двухколоночный лейаут (на desktop)
   - Адаптивность для mobile (stack layout)
   - Стили для toggles, radio buttons, navigation tabs

4. **apps/web/src/components/common/settings-modal/index.ts**
   - Экспорт компонента SettingsModal

### Измененные файлы

1. **apps/web/src/components/app-layout/app-bar/app-bar-right/user-menu/UserMenu.tsx**
   - Замена `<Link href='/settings'>` на кнопку с открытием модального окна
   - Добавление импорта `SettingsModal`
   - Добавление состояния `isSettingsOpen`
   - Рендеринг компонента `SettingsModal`

2. **packages/types/index.ts**
   - Добавление экспорта типов из `./user`

## Технические детали

### Технологии

- React hooks: useState, useEffect, useCallback
- TypeScript для типизации
- Framer Motion для анимаций (через компонент Modal)
- react-icons для иконок (LuUser, LuBell, LuMail, LuSave, LuCheck, LuX)
- localStorage для сохранения настроек

### Accessibility

- ARIA атрибуты для навигации (role='tablist', role='tab', role='tabpanel')
- Правильные labels для форм
- Focus trap внутри модалки (наследуется от Modal)
- Клавиатурная навигация (реализована в компоненте Modal)

### Адаптивность

- Desktop: двухколоночный лейаут (sidebar + контент)
- Mobile: stack layout с горизонтальными tabs навигацией
- Удобные размеры элементов для touch-интерфейса

## Результат

Модальное окно настроек полностью реализовано и интегрировано в приложение. Пользователь может:

1. Открыть настройки через меню пользователя в AppBar
2. Переключаться между секциями (Профиль, Уведомления, Email)
3. Редактировать профиль (имя, email, аватар)
4. Настраивать уведомления (5 типов toggles)
5. Управлять email подпиской с выбором частоты
6. Сохранять изменения с автоматической проверкой
7. Отменять несохраненные изменения

Настройки сохраняются в localStorage и автоматически загружаются при следующем открытии.
